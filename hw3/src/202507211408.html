<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React Nutrition Table</title>
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      color: #333;
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .container {
      max-width: 1000px;
      width: 95%;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }
    
    header {
      background: #2c3e50;
      color: white;
      padding: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, #3498db, #2ecc71, #e74c3c, #f39c12);
    }
    
    h1 {
      font-size: 2.8rem;
      margin-bottom: 10px;
      font-weight: 700;
    }
    
    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
      max-width: 700px;
      margin: 0 auto;
    }
    
    .content {
      padding: 30px;
    }
    
    .flex-container {
      display: flex;
      gap: 30px;
      margin-top: 20px;
    }
    
    @media (max-width: 768px) {
      .flex-container {
        flex-direction: column;
      }
    }
    
    .nutrition-input {
      flex: 1;
      background: #f8f9fa;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .table-container {
      flex: 1;
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    h2 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 1.8rem;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      display: flex;
      align-items: center;
    }
    
    h2 i {
      margin-right: 10px;
      color: #3498db;
    }
    
    .nutrient-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      margin-bottom: 10px;
      background: #ecf0f1;
      border-radius: 8px;
      transition: all 0.3s ease;
    }
    
    .nutrient-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background: linear-gradient(90deg, #d6eaf8, #ecf0f1);
    }
    
    .nutrient-name {
      font-weight: 600;
      color: #2c3e50;
      text-transform: capitalize;
    }
    
    .nutrient-value {
      background: #3498db;
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-weight: 600;
    }
    
    .table-wrapper {
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
    }
    
    th {
      background: #2c3e50;
      color: white;
      padding: 16px;
      text-align: left;
      font-weight: 600;
      position: relative;
    }
    
    th::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 10%;
      right: 10%;
      height: 3px;
      background: #3498db;
    }
    
    td {
      padding: 14px 16px;
      border-bottom: 1px solid #eee;
    }
    
    tr:nth-child(even) {
      background-color: #f8f9fa;
    }
    
    tr:hover {
      background-color: #e3f2fd;
    }
    
    .control-panel {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: #2c3e50;
      color: white;
      border-radius: 10px;
      margin-bottom: 25px;
    }
    
    .stats {
      display: flex;
      gap: 20px;
    }
    
    .stat-item {
      background: rgba(255, 255, 255, 0.15);
      padding: 12px 20px;
      border-radius: 8px;
      text-align: center;
    }
    
    .stat-label {
      font-size: 0.9rem;
      opacity: 0.8;
      margin-bottom: 5px;
    }
    
    .stat-value {
      font-size: 1.4rem;
      font-weight: 700;
    }
    
    .toggle-switch {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #e74c3c;
      transition: .4s;
      border-radius: 34px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: #2ecc71;
    }
    
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    
    .explanation {
      background: #e3f2fd;
      padding: 25px;
      border-radius: 10px;
      margin-top: 25px;
    }
    
    .code-block {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      overflow-x: auto;
      margin: 20px 0;
      font-size: 1rem;
      line-height: 1.5;
    }
    
    .highlight {
      color: #f39c12;
      font-weight: bold;
    }
    
    .key-points {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 25px;
    }
    
    .point-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      border-left: 4px solid #3498db;
    }
    
    .point-card h4 {
      color: #2c3e50;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }
    
    .point-card h4 i {
      margin-right: 10px;
      color: #3498db;
    }
    
    .point-card p {
      color: #555;
      font-size: 0.95rem;
    }
    
    footer {
      text-align: center;
      padding: 25px;
      background: #2c3e50;
      color: white;
      font-size: 1rem;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .footer-content {
      max-width: 700px;
      margin: 0 auto;
    }
    
    .color-bar {
      height: 6px;
      background: linear-gradient(90deg, #3498db, #2ecc71, #e74c3c, #f39c12);
      border-radius: 3px;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;
    
    // å¸¦å•ä½çš„è¥å…»æ•°æ®å¯¹è±¡
    const initialNutrition = {
      calories: "120 kcal",
      protein: "5g",
      fat: "8g",
      carbohydrates: "4g"
    };
    
    // æ ¼å¼åŒ–é”®å
    const formatKey = (key) => {
      return key.charAt(0).toUpperCase() + key.slice(1);
    };
    
    const NutritionTable = () => {
      // æ§åˆ¶è¡¨æ ¼æ˜¯å¦æ˜¾ç¤º
      const [showTable, setShowTable] = useState(true);
      
      // è¥å…»æ•°æ®
      const [nutrition, setNutrition] = useState(initialNutrition);
      
      // æ›´æ–°è¥å…»æ•°æ®
      const updateNutrient = (key, value) => {
        setNutrition(prev => ({
          ...prev,
          [key]: value
        }));
      };
      
      // è®¡ç®—åˆ—æ•°
      const columns = Object.keys(nutrition).length;
      
      // è®¡ç®—æ€»å€¼ï¼ˆç¤ºä¾‹ï¼‰
      const calculateTotal = () => {
        const values = Object.values(nutrition);
        let calories = 0;
        let protein = 0;
        
        values.forEach(val => {
          if (val.includes('kcal')) calories += parseInt(val);
          if (val.includes('g')) {
            if (val.includes('protein')) protein += parseInt(val);
          }
        });
        
        // è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„ç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ›´å¤æ‚çš„è§£æ
        return {
          calories: calories || 0,
          protein: protein || 0
        };
      };
      
      const totals = calculateTotal();
      
      return (
        <div className="container">
          <header>
            <h1>React Nutrition Table Generator</h1>
            <p className="subtitle">åŸºäº nutrition å¯¹è±¡åŠ¨æ€ç”Ÿæˆè¡¨æ ¼åˆ—</p>
          </header>
          
          <div className="content">
            <div className="control-panel">
              <div className="stats">
                <div className="stat-item">
                  <div className="stat-label">åˆ—æ•°</div>
                  <div className="stat-value">{columns}</div>
                </div>
                <div className="stat-item">
                  <div className="stat-label">çƒ­é‡</div>
                  <div className="stat-value">{totals.calories} kcal</div>
                </div>
                <div className="stat-item">
                  <div className="stat-label">è›‹ç™½è´¨</div>
                  <div className="stat-value">{totals.protein}g</div>
                </div>
              </div>
              
              <div className="toggle-switch">
                <span>æ˜¾ç¤ºè¡¨æ ¼</span>
                <label className="switch">
                  <input 
                    type="checkbox" 
                    checked={showTable} 
                    onChange={() => setShowTable(!showTable)} 
                  />
                  <span className="slider"></span>
                </label>
              </div>
            </div>
            
            <div className="flex-container">
              <div className="nutrition-input">
                <h2><i className="icon">ğŸ“Š</i> Nutrition æ•°æ®ç»“æ„</h2>
                
                <div className="nutrients-list">
                  {Object.entries(nutrition).map(([key, value]) => (
                    <div className="nutrient-item" key={key}>
                      <span className="nutrient-name">{formatKey(key)}</span>
                      <span className="nutrient-value">{value}</span>
                    </div>
                  ))}
                </div>
                
                <div className="code-block">
                  {`const nutrition = {\n`}
                  {Object.entries(nutrition).map(([key, value]) => (
                    `  ${key}: "${value}",\n`
                  ))}
                  {`}`}
                </div>
                
                <p>è¿™æ˜¯ä¸€ä¸ª JavaScript å¯¹è±¡ï¼Œå…¶ä¸­é”®è¡¨ç¤ºè¥å…»åç§°ï¼Œå€¼è¡¨ç¤ºè¥å…»å«é‡ã€‚</p>
              </div>
              
              <div className="table-container">
                <h2><i className="icon">ğŸ§ª</i> åŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼</h2>
                
                {showTable ? (
                  <div className="table-wrapper">
                    <table>
                      <thead>
                        <tr>
                          {/* æ­£ç¡®å†™æ³•ï¼šä½¿ç”¨ Object.keys(nutrition).map ç”Ÿæˆè¡¨å¤´ */}
                          {Object.keys(nutrition).map(key => (
                            <th key={key}>{formatKey(key)}</th>
                          ))}
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          {/* ç”Ÿæˆè¡¨æ ¼å•å…ƒæ ¼ */}
                          {Object.values(nutrition).map((value, index) => (
                            <td key={index}>{value}</td>
                          ))}
                        </tr>
                        <tr>
                          {Object.keys(nutrition).map(key => (
                            <td key={`daily-${key}`}>
                              {Math.round(Math.random() * 100)}% DV
                            </td>
                          ))}
                        </tr>
                      </tbody>
                    </table>
                  </div>
                ) : (
                  <div style={{
                    background: '#f8f9fa',
                    padding: '40px 20px',
                    borderRadius: '10px',
                    textAlign: 'center',
                    color: '#7f8c8d',
                    border: '2px dashed #ddd'
                  }}>
                    <h3>è¡¨æ ¼å½“å‰å·²éšè—</h3>
                    <p>åˆ‡æ¢ä¸Šæ–¹å¼€å…³æ˜¾ç¤ºåŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼</p>
                  </div>
                )}
                
                <div className="explanation">
                  <h3>å…³é”®å®ç°è§£é‡Šï¼š</h3>
                  
                  <div className="code-block">
                    {/* æ˜¾ç¤ºé”™è¯¯å†™æ³• */}
                    <span style={{color: '#e74c3c'}}>
                      {'// é”™è¯¯å†™æ³•ï¼šnutrition.keys() ä¸å­˜åœ¨\n'}
                      {'nutrition.keys().map(n => {\n'}
                      {'  <th>{nutrition.n}</th>\n'}
                      {'})'}\n\n
                    </span>
                    
                    {/* æ˜¾ç¤ºæ­£ç¡®å†™æ³• */}
                    <span style={{color: '#2ecc71'}}>
                      {'// æ­£ç¡®å†™æ³•ï¼šä½¿ç”¨ Object.keys()\n'}
                      {'Object.keys(nutrition).map(key => (\n'}
                      {'  <th key={key}>{key}</th>\n'}
                      {')'}\n\n
                    </span>
                    
                    {'{showTable && (\n'}
                    {'  <table>\n'}
                    {'    <thead>\n'}
                    {'      <tr>\n'}
                    {'        {Object.keys(nutrition).map(key => (\n'}
                    {'          <th key={key}>{key}</th>\n'}
                    {'        )}\n'}
                    {'      </tr>\n'}
                    {'    </thead>\n'}
                    {'    ...\n'}
                    {'  </table>\n'}
                    {')}'}
                  </div>
                  
                  <p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code className="highlight">Object.keys(nutrition)</code>è·å–å¯¹è±¡æ‰€æœ‰é”®çš„æ•°ç»„ï¼Œç„¶åä½¿ç”¨<code className="highlight">map()</code>æ–¹æ³•éå†è¿™äº›é”®å¹¶ä¸ºæ¯ä¸ªé”®åˆ›å»ºè¡¨å¤´å•å…ƒæ ¼ã€‚</p>
                  
                  <div className="key-points">
                    <div className="point-card">
                      <h4><i>âœ“</i> ä¸ºä»€ä¹ˆä½¿ç”¨ Object.keys()ï¼Ÿ</h4>
                      <p>JavaScript å¯¹è±¡æ²¡æœ‰å†…å»ºçš„ keys() æ–¹æ³•ã€‚è¦è·å–å¯¹è±¡çš„é”®åˆ—è¡¨ï¼Œå¿…é¡»ä½¿ç”¨ Object.keys(obj)ã€‚</p>
                    </div>
                    
                    <div className="point-card">
                      <h4><i>âœ“</i> ä¸ºä»€ä¹ˆéœ€è¦ key å±æ€§ï¼Ÿ</h4>
                      <p>React è¦æ±‚æ¯ä¸ªåŠ¨æ€ç”Ÿæˆçš„å…ƒç´ éƒ½æœ‰å”¯ä¸€çš„ key å±æ€§ï¼Œè¿™æœ‰åŠ©äº React é«˜æ•ˆåœ°æ›´æ–°å’Œé‡æ–°æ¸²æŸ“åˆ—è¡¨ã€‚</p>
                    </div>
                    
                    <div className="point-card">
                      <h4><i>âœ“</i> ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ nutrition.nï¼Ÿ</h4>
                      <p>åœ¨ map å‡½æ•°ä¸­ï¼Œn æ˜¯é”®åå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ nutrition å¯¹è±¡çš„å±æ€§ã€‚è®¿é—®å±æ€§å€¼åº”ä½¿ç”¨ nutrition[n]ã€‚ä½†è¡¨å¤´åº”æ˜¾ç¤ºé”®åè€Œéå€¼ã€‚</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <footer>
            <div className="footer-content">
              <p>React åŠ¨æ€è¡¨æ ¼ç”Ÿæˆç¤ºä¾‹ | é€šè¿‡ Object.keys() è·å–å¯¹è±¡å±æ€§</p>
              <p>ä½¿ç”¨ map() æ–¹æ³•å°†å¯¹è±¡é”®è½¬æ¢ä¸ºè¡¨å¤´åˆ—</p>
              <div className="color-bar"></div>
            </div>
          </footer>
        </div>
      );
